<h1>Requests API</h1>
<p>REST API для управления заявками</p>

Общее описание:
Необходимо реализовать систему принятия и обработки заявок пользователей с сайта. Любой пользователь может отправить данные по публичному API, реализованному нами, оставив заявку с каким-то текстом,. Затем заявка рассматривается ответственным лицом и ей устанавливается статус Завершено. Чтобы установить этот статус, ответственное лицо должно оставить комментарий. Пользователь должен получить свой ответ по email.
При этом, ответственное лицо должно иметь возможность получить список заявок, отфильтровать их по статусу и по дате, а также иметь возможность ответить задающему вопрос через email.

Сущности:

Заявка
id
Уникальный идентификатор
name
Имя пользователя - строка, обязательная
email
Email пользователя - строка, обязательная
status
Статус - enum(“Active”, “Resolved”)
message
Сообщение пользователя - текст, обязательный
comment
Ответ ответственного лица - текст, обязательный, если статус Resolved
created_at
Время создания заявки - timestamp или datetime
updated_at
Время ответа на заявку 


Endpointы API:
Методы API должны быть документированы каким-нибудь средством документации на ваш выбор. Предпочтительно, с наличием песочницы.
GET /requests/ - получение заявок ответственным лицом, с фильтрацией по статусу
PUT /requests/{id}/ - ответ на конкретную задачу ответственным лицом
POST /requests/ - отправка заявки пользователями системы

<p>Проект выполнен на <b>Yii2</b> (basic template) с использованием <b>Swagger</b> для документации, упакован в <b>Docker</b></p>

<h2>Возможности:</h2>
  <li>Создание, просмотр, обновление и удаление заявок</li>
  <li>Отправка email-уведомлений пользователям</li>
  <li>Swagger-документация (интерактивная, с возможностью отправлять запросы прямо из интерфейса)</li>
  <li>Поддержка CORS</li>
  <li>Автоматическая установка зависимостей и миграций</li>
  <li>Контейнеризированная среда для разработки и тестирования</li>
  
<h2>Дополнения и упрощения:</h2>
  <li>Добавлены эндпойнты API: GET <b>/requests/{id}</b> - Получить заявку по ID, и DELETE <b>/requests/{id}</b> - Удалить заявку</li>
  <li>Авторизация сделана только для рассмотрения заявки ответственным лицом и удаления заявки</li>
  <li>Не сделан web интерфейс для отправки заявок и ответа на них (не требовалось)</li>
  <li>Пользователи не хранятся в БД, используется шаблонная модель User, которая создалась при установке Yii2</li>
  <li>Не создавались переменные окружения .env, .env.test, .env.production (т.к. проект тестовый)</li>
  <li>Email сохраняются в виде файлов</li>
  <li>Сделано 3 API-теста (не сделано полное покрытие тестами)</li>

<h2>Как запустить проект:</h2>
<ul>
  <li>
    Клонировать репозиторий requests-test: 
    <ul>
      <li><b>git clone https://github.com/vad-dom/requests-test.git</b></li>
      <li><b>cd requests-test</b></li>
    </ul>
  </li>
  <li>
    Собрать и запустить контейнеры: 
    <ul>
      <li><b>docker-compose up --build</b></li>
    </ul>
  </li>
  <li>
    В результате автоматически: 
    <ul>
      <li><b>Соберутся все Docker-образы</b></li>
      <li><b>Установятся зависимости через Composer</b></li>
      <li><b>Применятся миграции</b></li>
      <li><b>Настроятся права доступа к папкам runtime, vendor и web/assets</b></li>
      <li><b>Запустится приложение</b></li>
    </ul>
  </li>
  <li>
    После запуска Swagger-документация будет доступна по адресу: 
    <ul>
      <li><b>http://localhost:8080</b></li>
    </ul>
  </li>
  <li>
    Выполнить API-тесты (внутри контейнера приложения):
    <ul>
      <li><b>docker-compose exec app vendor/bin/codecept run api</b></li>
    </ul>
  </li>
  <li>Результат тестов будет отображён в терминале</li>
</ul>
